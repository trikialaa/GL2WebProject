CREATE DATABASE BDHOTEL;

USE BDHOTEL;

CREATE TABLE AGENT (
	AGENTID int,
	LastName varchar (255),
	FirstName varchar(255),
	Address varchar(255),
	NumTel varchar (8),
	Login_Agent varchar (255),
	Password_Agent varchar (255)
);

CREATE TABLE CHAMBRE (
	CHAMBREID int PRIMARY KEY,
	Type varchar(255),
	Vue varchar(255)
);

CREATE TABLE ELEMENTFACTURE (
	ELEMENTID int PRIMARY KEY,
	NAME varchar(255),
	PRICE DECIMAL(6,3)
);

CREATE TABLE FACTURECOMPLETE (
	FACTUREID int ,
	ELEMENTID int ,
	FOREIGN KEY (ELEMENTID) REFERENCES ELEMENTFACTURE(ELEMENTID),
	FOREIGN KEY (FACTUREID) REFERENCES FACTURE(FACTUREID),
	PRIMARY KEY (FACTUREID,ELEMENTID)
);

CREATE TABLE CLIENT (
	CLIENTID int PRIMARY KEY,
	Nom varchar(255),
	Prenom varchar(255),
	NTel varchar(8),
	EMail  varchar(255),
	IDType varchar (255),
	IDNumber varchar(255)
);

CREATE TABLE RESERVATION (
	RESERVATIONID int PRIMARY KEY,
	CheckIn datetime,
	CheckOut datetime,
	CLIENTID int,
	FOREIGN KEY (CLIENTID) REFERENCES CLIENT(CLIENTID)
	);

CREATE TABLE SEJOUR (
	SEJOURID int PRIMARY KEY,
	CheckIn datetime,
	CheckOut datetime,
	CLIENTID int,
	FACTUREID int,
	FOREIGN KEY (CLIENTID) REFERENCES CLIENT(CLIENTID),
	FOREIGN KEY (FACTUREID) REFERENCES FACTURE(FACTUREID)
	);

CREATE TABLE CHAMBREPLEINE (
	SEJOURID int,
	CHAMBREID int,

	FOREIGN KEY (SEJOURID) REFERENCES SEJOUR(SEJOURID),
	FOREIGN KEY (CHAMBREID) REFERENCES CHAMBRE(CHAMBREID),
	PRIMARY KEY (CHAMBREID,SEJOURID)
	);

CREATE TABLE FACTURE (
	FACTUREID int PRIMARY KEY,
	MethodeDePayement varchar (255)
	);



CREATE TABLE CHAMBRERESERVE (
	RESERVATIONID int,
	CHAMBREID int,

	FOREIGN KEY (RESERVATIONID) REFERENCES RESERVATION(RESERVATIONID),
	FOREIGN KEY (CHAMBREID) REFERENCES CHAMBRE(CHAMBREID),
	PRIMARY KEY (CHAMBREID,RESERVATIONID)
	);


CREATE TABLE CLIENTSEJOUR (
	SEJOURID int,
	CLIENTID int,

	FOREIGN KEY (SEJOURID) REFERENCES SEJOUR(SEJOURID),
	FOREIGN KEY (CLIENTID) REFERENCES CLIENT(CLIENTID),
	PRIMARY KEY (SEJOURID,CLIENTID)
	);
